<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>IELTS Speaking Practice</title>
  <link rel="stylesheet" href="/static/css/style.css" />
</head>
<body>
  <div id="app">

    <!-- ============================================================ -->
    <!-- HOME SCREEN                                                  -->
    <!-- ============================================================ -->
    <section id="screen-home" class="screen active">
      <div class="hero">
        <h1>IELTS Speaking</h1>
        <p class="subtitle">Personal Practice System</p>
      </div>
      <div id="home-stats"></div>
      <div class="home-buttons">
        <button class="btn btn-primary btn-large" data-action="goto-part1-setup">
          <span class="btn-icon">1</span>
          Part 1 Practice
          <span class="btn-desc">5 questions ¬∑ 45s each</span>
        </button>
        <button class="btn btn-primary btn-large" data-action="goto-part2-setup">
          <span class="btn-icon">2</span>
          Part 2 &amp; 3 Practice
          <span class="btn-desc">2 min notes ¬∑ 2 min speaking</span>
        </button>
        <button class="btn btn-primary btn-large" data-action="start-mock-test">
          <span class="btn-icon">M</span>
          Mock Test
          <span class="btn-desc">Part 1 &rarr; 2 &rarr; 3 ¬∑ Full simulation</span>
        </button>
        <button class="btn btn-primary btn-large" data-action="goto-writing-task1-setup">
          <span class="btn-icon">W1</span>
          Writing Task 1
          <span class="btn-desc">20 min ¬∑ Chart / Graph / Map description</span>
        </button>
        <button class="btn btn-primary btn-large" data-action="goto-writing-task2-setup">
          <span class="btn-icon">W2</span>
          Writing Task 2
          <span class="btn-desc">40 min ¬∑ Essay</span>
        </button>
        <button class="btn btn-secondary" data-action="goto-history">
          Practice History
        </button>
        <button class="btn btn-secondary" data-action="goto-bank">
          Question Bank
        </button>
      </div>
    </section>

    <!-- ============================================================ -->
    <!-- PART 1 SETUP                                                 -->
    <!-- ============================================================ -->
    <section id="screen-part1-setup" class="screen">
      <h2>Part 1 ‚Äî Paste Questions</h2>
      <div class="draw-mode-toggle">
        <button class="btn btn-toggle active" id="btn-mode-topic" data-action="set-p1-mode-topic">By Topic</button>
        <button class="btn btn-toggle" id="btn-mode-random" data-action="set-p1-mode-random">Random 5</button>
      </div>
      <textarea id="part1-md-input" rows="12" placeholder="Paste questions in markdown format, e.g.&#10;&#10;# Q1-1:&#10;Do you work or study?&#10;&#10;# A1-1:&#10;I currently work as a software engineer‚Ä¶&#10;&#10;# Q1-2:&#10;What do you enjoy about your job?"></textarea>
      <div id="part1-drawn-status"></div>
      <div id="part1-parsed-preview" class="parsed-preview"></div>
      <div class="setup-actions">
        <button class="btn btn-secondary" data-action="reshuffle-part1">Reshuffle</button>
        <button class="btn btn-secondary" data-action="random-part1">Random from Bank</button>
        <button class="btn btn-primary" data-action="start-part1">Start Practice</button>
      </div>
      <button class="btn btn-ghost" data-action="goto-home">‚Üê Back</button>
    </section>

    <!-- ============================================================ -->
    <!-- PART 1 PRACTICE                                              -->
    <!-- ============================================================ -->
    <section id="screen-part1-practice" class="screen">
      <div class="practice-header">
        <span class="part-label">Part 1</span>
        <span class="question-counter" id="part1-counter">Q1 / 5</span>
      </div>
      <div class="question-display" id="part1-question-text">
        Question text here
      </div>
      <div class="timer-container">
        <svg class="timer-ring" viewBox="0 0 120 120">
          <circle class="timer-ring-bg" cx="60" cy="60" r="52" />
          <circle class="timer-ring-progress" id="part1-ring" cx="60" cy="60" r="52" />
        </svg>
        <div class="timer-text" id="part1-timer-text">45</div>
      </div>
      <div class="recording-badge" id="part1-rec-badge">
        <span class="rec-dot"></span> <span class="rec-label">Recording</span>
      </div>
      <button class="btn btn-secondary btn-small" data-action="skip-part1">Next ‚Üí</button>
    </section>

    <!-- ============================================================ -->
    <!-- PART 2/3 SETUP                                               -->
    <!-- ============================================================ -->
    <section id="screen-part2-setup" class="screen">
      <h2>Part 2 &amp; 3 ‚Äî Topic Card</h2>
      <textarea id="part2-topic-input" rows="6" placeholder="Paste the topic card here, e.g.&#10;&#10;Describe a book you have recently read.&#10;You should say:&#10;- what the book is&#10;- when you read it&#10;- what it is about&#10;and explain why you liked it."></textarea>
      <div id="part2-drawn-status"></div>
      <div id="part2-parsed-preview" class="parsed-preview"></div>
      <div class="setup-actions">
        <button class="btn btn-secondary" data-action="reshuffle-part2">Reshuffle</button>
        <button class="btn btn-secondary" data-action="random-part2">Random from Bank</button>
        <button class="btn btn-primary" data-action="start-part2">Start Practice</button>
      </div>
      <button class="btn btn-ghost" data-action="goto-home">‚Üê Back</button>
    </section>

    <!-- ============================================================ -->
    <!-- PART 2 ‚Äî NOTE-TAKING PHASE                                   -->
    <!-- ============================================================ -->
    <section id="screen-part2-notes" class="screen">
      <div class="practice-header">
        <span class="part-label">Part 2 ‚Äî Preparation</span>
        <span class="phase-label">üìù Take Notes</span>
      </div>
      <div class="topic-preview" id="part2-topic-display"></div>
      <div class="timer-container">
        <svg class="timer-ring" viewBox="0 0 120 120">
          <circle class="timer-ring-bg" cx="60" cy="60" r="52" />
          <circle class="timer-ring-progress" id="part2-notes-ring" cx="60" cy="60" r="52" />
        </svg>
        <div class="timer-text" id="part2-notes-timer">2:00</div>
      </div>
      <textarea id="part2-notes-area" rows="6" placeholder="Write your notes here‚Ä¶"></textarea>
      <div id="part2-vocab-panel" class="vocab-panel"></div>
    </section>

    <!-- ============================================================ -->
    <!-- PART 2 ‚Äî SPEAKING PHASE                                      -->
    <!-- ============================================================ -->
    <section id="screen-part2-speaking" class="screen">
      <div class="practice-header">
        <span class="part-label">Part 2 ‚Äî Speaking</span>
        <span class="phase-label">üéôÔ∏è Your Turn</span>
      </div>
      <div class="topic-preview" id="part2-topic-display-2"></div>
      <div class="timer-container">
        <svg class="timer-ring" viewBox="0 0 120 120">
          <circle class="timer-ring-bg" cx="60" cy="60" r="52" />
          <circle class="timer-ring-progress" id="part2-speak-ring" cx="60" cy="60" r="52" />
        </svg>
        <div class="timer-text" id="part2-speak-timer">2:00</div>
      </div>
      <div class="recording-badge active" id="part2-rec-badge">
        <span class="rec-dot"></span> <span class="rec-label">Recording</span>
      </div>
      <div class="notes-reminder" id="part2-notes-reminder"></div>
    </section>

    <!-- ============================================================ -->
    <!-- PART 3 ‚Äî DISCUSSION PHASE                                     -->
    <!-- ============================================================ -->
    <section id="screen-part3-practice" class="screen">
      <div class="practice-header">
        <span class="part-label">Part 3 ‚Äî Discussion</span>
        <span class="question-counter" id="part3-counter">Q1 / 3</span>
      </div>
      <div class="question-display" id="part3-question-text">
        Question text here
      </div>
      <div class="timer-container">
        <svg class="timer-ring" viewBox="0 0 120 120">
          <circle class="timer-ring-bg" cx="60" cy="60" r="52" />
          <circle class="timer-ring-progress" id="part3-ring" cx="60" cy="60" r="52" />
        </svg>
        <div class="timer-text" id="part3-timer-text">60</div>
      </div>
      <div class="recording-badge" id="part3-rec-badge">
        <span class="rec-dot"></span> <span class="rec-label">Recording</span>
      </div>
      <button class="btn btn-secondary btn-small" data-action="skip-part3">Next ‚Üí</button>
    </section>

    <!-- ============================================================ -->
    <!-- WRITING ‚Äî SETUP                                              -->
    <!-- ============================================================ -->
    <section id="screen-writing-setup" class="screen">
      <h2 id="writing-setup-title">Writing Task 1</h2>
      <div id="writing-question-preview" class="writing-question-preview"></div>
      <div id="writing-image-preview" class="writing-image-preview"></div>
      <div id="writing-drawn-status"></div>
      <div class="setup-actions">
        <button class="btn btn-secondary" data-action="reshuffle-writing">Reshuffle</button>
        <button class="btn btn-primary" data-action="start-writing">Start Writing</button>
      </div>
      <button class="btn btn-ghost" data-action="goto-home">&larr; Back</button>
    </section>

    <!-- ============================================================ -->
    <!-- WRITING ‚Äî BRAINSTORM PHASE (Chinese outline)                 -->
    <!-- ============================================================ -->
    <section id="screen-writing-brainstorm" class="screen">
      <div class="practice-header">
        <span class="part-label" id="writing-brainstorm-label">Writing Task 2 ‚Äî Brainstorm</span>
        <span class="phase-label" id="writing-brainstorm-phase">&#x1F4DD; &#x4E2D;&#x6587;&#x767C;&#x60F3;</span>
      </div>
      <div class="writing-question-display" id="writing-brainstorm-question"></div>
      <div class="writing-image-display" id="writing-brainstorm-image"></div>
      <div class="timer-container">
        <svg class="timer-ring" viewBox="0 0 120 120">
          <circle class="timer-ring-bg" cx="60" cy="60" r="52" />
          <circle class="timer-ring-progress" id="writing-brainstorm-ring" cx="60" cy="60" r="52" />
        </svg>
        <div class="timer-text" id="writing-brainstorm-timer">10:00</div>
      </div>
      <textarea id="writing-brainstorm-input" class="writing-brainstorm-area" rows="12" placeholder="&#x4EE5;&#x4E2D;&#x6587;&#x898F;&#x5283;&#x4F5C;&#x6587;&#x7D50;&#x69CB;&#xFF0C;&#x4F8B;&#x5982;&#xFF1A;&#10;&#10;P1: &#x80CC;&#x666F; / &#x722D;&#x8B70; / &#x7ACB;&#x5834; / &#x7406;&#x7531;&#10;P2: &#x4E3B;&#x8AD6;&#x9EDE; / Why / &#x679C; / &#x6B21;&#x8AD6;&#x9EDE;&#10;P3: &#x627F;&#x8A8D; / &#x53CD;&#x99C1; / &#x89E3;&#x6CD5; / &#x56DE;&#x6263;&#10;P4: &#x7E3D;&#x7D50; / &#x56DE;&#x6263;"></textarea>
      <div class="writing-bottom-bar">
        <button class="btn btn-primary btn-small" data-action="skip-brainstorm">Skip to Writing &rarr;</button>
      </div>
    </section>

    <!-- ============================================================ -->
    <!-- WRITING ‚Äî ESSAY PHASE (English writing)                      -->
    <!-- ============================================================ -->
    <section id="screen-writing-practice" class="screen">
      <div class="practice-header">
        <span class="part-label" id="writing-practice-label">Writing Task 2 ‚Äî Essay</span>
        <span class="question-counter" id="writing-word-count">0 words</span>
      </div>
      <div class="writing-question-display" id="writing-practice-question"></div>
      <div class="writing-image-display" id="writing-practice-image"></div>
      <div class="timer-container">
        <svg class="timer-ring" viewBox="0 0 120 120">
          <circle class="timer-ring-bg" cx="60" cy="60" r="52" />
          <circle class="timer-ring-progress" id="writing-timer-ring" cx="60" cy="60" r="52" />
        </svg>
        <div class="timer-text" id="writing-timer-text">30:00</div>
      </div>
      <div class="notes-reminder" id="writing-brainstorm-reminder"></div>
      <textarea id="writing-essay-input" class="writing-essay-area" rows="16" placeholder="Start writing your essay in English..."></textarea>
      <div class="writing-bottom-bar">
        <span class="writing-word-count-bar" id="writing-word-count-bar">0 words</span>
        <button class="btn btn-primary btn-small" data-action="finish-writing">Finish</button>
      </div>
    </section>

    <!-- ============================================================ -->
    <!-- PROCESSING / LOADING                                         -->
    <!-- ============================================================ -->
    <section id="screen-processing" class="screen">
      <div class="processing-content">
        <div class="spinner"></div>
        <h2>Transcribing‚Ä¶</h2>
        <p id="processing-status">Sending audio to Whisper ASR</p>
      </div>
    </section>

    <!-- ============================================================ -->
    <!-- RESULTS                                                      -->
    <!-- ============================================================ -->
    <section id="screen-results" class="screen">
      <h2 id="results-title">Results</h2>
      <div id="results-content"></div>
      <div class="results-actions">
        <button class="btn btn-primary" data-action="copy-results">üìã Copy for Claude Analysis</button>
        <button class="btn btn-secondary" data-action="download-pdf">üìÑ Download PDF</button>
        <button class="btn btn-secondary" data-action="goto-home">Back to Home</button>
      </div>
      <div class="copy-toast" id="copy-toast">Copied to clipboard!</div>
    </section>

    <!-- ============================================================ -->
    <!-- PRACTICE HISTORY                                             -->
    <!-- ============================================================ -->
    <section id="screen-history" class="screen">
      <h2>Practice History</h2>
      <div id="history-content"></div>
      <button class="btn btn-ghost" data-action="goto-home">&larr; Back</button>
    </section>

    <!-- ============================================================ -->
    <!-- QUESTION BANK                                                -->
    <!-- ============================================================ -->
    <section id="screen-bank" class="screen">
      <h2>Question Bank</h2>
      <div class="bank-section">
        <h3>Part 1 Questions <span class="count" id="bank-part1-count">(0)</span></h3>
        <textarea id="bank-part1" rows="8" placeholder="One question per line‚Ä¶"></textarea>
      </div>
      <div class="bank-section">
        <h3>Part 2 Topics <span class="count" id="bank-part2-count">(0)</span></h3>
        <textarea id="bank-part2" rows="8" placeholder="Separate topics with a blank line‚Ä¶"></textarea>
      </div>
      <div class="setup-actions">
        <button class="btn btn-primary" data-action="save-bank">Save</button>
        <button class="btn btn-ghost" data-action="goto-home">‚Üê Back</button>
      </div>
    </section>

  </div>

  <script type="module" src="/static/js/app.js"></script>
</body>
</html>
